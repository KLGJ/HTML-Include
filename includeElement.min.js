"use strict";class HTMLIncludeElement extends HTMLElement{#a;constructor(a){super();this.attachShadow({mode:"open"});this.#a=!!a;}get cache(){return this.getAttribute("cache");}set cache(a){this.setAttribute("cache",a);}get maxdepth(){let a=parseInt(this.getAttribute("maxdepth"),10);a=isNaN(a)?-1:a;a=a<0?0:a;a=a===0?-1:a;return a;}set maxdepth(a){let b=parseInt(a,10);b=isNaN(b)?-1:b;b=b<0?0:b;b=b===0?-1:b;this.setAttribute("maxdepth",b.toString(10));}get mode(){return this.getAttribute("mode");}set mode(a){this.setAttribute("mode",a);}get recursion(){return this.hasAttribute("recursion");}set recursion(a){this.toggleAttribute("recursion",!!a);}get src(){return this.hasAttribute("src")?this.getAttribute("src").trim():"";}set src(a){this.setAttribute("src",a);}#b(a){let b=true;for(let i=0;i<a.length;i++)if(a[i]===0){b=false;break;}return b;}#c(a){a.parentNode.removeChild(a);}#d(a,b){Array.from(a).forEach(c=>b(c));}#e(a){let b=document.createElement("div");b.innerHTML=a;let c=b.getElementsByTagName("html-include");this.#d(c,d=>{let e=new HTMLIncludeElement(true),f=d.attributes;for(let i=0;i<f.length;i++)e.setAttribute(f[i].name,f[i].value);let g=d.childNodes;while(g.length)e.appendChild(g[0]);let h=d.parentNode;h.insertBefore(e,d);h.removeChild(d);});let d=b.getElementsByTagName("script");this.#d(d,e=>{let f=e.text,g=document.createElement("script"),h=e.attributes;for(let i=0;i<h.length;i++)g.setAttribute(h[i].name,h[i].value);if(f.length)g.text=f;let i=e.parentNode;i.insertBefore(g,e);i.removeChild(e);});return b;}#f(a){let b=Array.from(a.getElementsByTagName("html-include"));for(let i=0;i<b.length;i++){let c=b[i].getElementsByTagName("html-include");for(let j=0;j<c.length;j++)b.splice(b.indexOf(c[j]),1);}return b;}#g(a,b){let c=Array.from(a);c.push(b);c.forEach((d,e,f)=>{if(d>0)f[e]=d-1;});return c;}async#h(a,b){let c=a.src;if(c.length===0){this.#c(a);return;}let d=a.mode;d=(d===null||d==="")?"no-cors":d;d=/^cors|no-cors|same-origin$/i.test(d)?d:"no-cors";let e=a.recursion,f=a.maxdepth,g=this.#g(b,f),h=a.cache;h=h===null?"no-cache":h===""?"default":h;h=/^default|no-store|reload|no-cache|force-cache|only-if-cached$/i.test(h)?h:"default";let i=this;await fetch(c,{mode:d,cache:h}).then(j=>j.ok?j.text():"").then(j=>i.#i(a,j,e,g)).catch(j=>{if(a.parentNode)i.#c(a);console.error("Error:",j);});g.splice(0);}#i(a,b,c,d){let e=a.parentNode,f=this.#e(b),g=this.#f(f),h=f.childNodes;while(h.length)e.insertBefore(h[0],a);e.removeChild(a);if(c&&g.length)this.#j(g,d);}#j(a,b){if(!this.#b(b)){this.#d(a,c=>this.#c(c));return;}this.#d(a,c=>this.#h(c,b));}connectedCallback(){if(this.#a)return;let a=this.#f(document);if(a.includes(this))this.#h(this,[]);}}customElements.define("html-include",HTMLIncludeElement);
